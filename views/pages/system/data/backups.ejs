<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Data Management | School ERP System</title>
      <meta name="description" content="System data backup, migration, and import/export tools" />

      <!-- Bootstrap CSS -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
      <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet" />
   </head>
   <body class="bg-light">
      <%- include('../../partials/header/authenticated') %>

      <div class="container-fluid">
         <div class="row">
            <!-- Sidebar -->
            <%- include('../../partials/nav/system-admin') %>

            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
               <div
                  class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                  <h1 class="h2"><i class="bi bi-database"></i> Data Management</h1>
                  <div class="btn-toolbar mb-2 mb-md-0">
                     <div class="btn-group me-2">
                        <button type="button" class="btn btn-sm btn-primary" onclick="createBackup()">
                           <i class="bi bi-shield-check"></i> Create Backup
                        </button>
                     </div>
                  </div>
               </div>

               <!-- Flash Messages -->
               <%- include('../../partials/flash-messages') %>

               <!-- Data Management Tools -->
               <div class="row g-4">
                  <!-- Backup Management -->
                  <div class="col-lg-6">
                     <div class="card h-100 border-primary">
                        <div class="card-header bg-primary text-white">
                           <h5 class="card-title mb-0"><i class="bi bi-cloud-arrow-down"></i> Backup Management</h5>
                        </div>
                        <div class="card-body">
                           <p class="text-muted mb-3">Create, schedule, and manage system backups</p>

                           <!-- Backup Status -->
                           <div class="row mb-3">
                              <div class="col-6">
                                 <div class="text-center">
                                    <div class="h5 text-success">✓</div>
                                    <small class="text-muted">Last Backup</small>
                                    <div class="small text-success">2 hours ago</div>
                                 </div>
                              </div>
                              <div class="col-6">
                                 <div class="text-center">
                                    <div class="h5 text-info">15</div>
                                    <small class="text-muted">Total Backups</small>
                                    <div class="small text-info">Available</div>
                                 </div>
                              </div>
                           </div>

                           <div class="d-grid gap-2">
                              <button class="btn btn-outline-primary btn-sm" disabled>
                                 <i class="bi bi-plus-circle"></i> Create Manual Backup
                              </button>
                              <button class="btn btn-outline-secondary btn-sm" disabled>
                                 <i class="bi bi-arrow-clockwise"></i> Restore from Backup
                              </button>
                              <button class="btn btn-outline-info btn-sm" disabled>
                                 <i class="bi bi-calendar"></i> Schedule Backups
                              </button>
                           </div>

                           <div class="mt-3">
                              <small class="text-muted">
                                 <i class="bi bi-info-circle me-1"></i>
                                 Automated backups run daily at 2:00 AM
                              </small>
                           </div>
                        </div>
                     </div>
                  </div>

                  <!-- Database Migrations -->
                  <div class="col-lg-6">
                     <div class="card h-100 border-warning">
                        <div class="card-header bg-warning text-dark">
                           <h5 class="card-title mb-0"><i class="bi bi-arrow-repeat"></i> Database Migrations</h5>
                        </div>
                        <div class="card-body">
                           <p class="text-muted mb-3">Manage database schema updates and migrations</p>

                           <!-- Migration Status -->
                           <div class="row mb-3">
                              <div class="col-6">
                                 <div class="text-center">
                                    <div class="h5 text-success">✓</div>
                                    <small class="text-muted">Schema Version</small>
                                    <div class="small text-success">v2.1.3</div>
                                 </div>
                              </div>
                              <div class="col-6">
                                 <div class="text-center">
                                    <div class="h5 text-info">0</div>
                                    <small class="text-muted">Pending</small>
                                    <div class="small text-info">Migrations</div>
                                 </div>
                              </div>
                           </div>

                           <div class="d-grid gap-2">
                              <button class="btn btn-outline-warning btn-sm" disabled>
                                 <i class="bi bi-list"></i> View Migration History
                              </button>
                              <button class="btn btn-outline-secondary btn-sm" disabled>
                                 <i class="bi bi-play"></i> Run Pending Migrations
                              </button>
                              <button class="btn btn-outline-info btn-sm" disabled>
                                 <i class="bi bi-arrow-down"></i> Rollback Migration
                              </button>
                           </div>

                           <div class="mt-3">
                              <small class="text-muted">
                                 <i class="bi bi-shield-exclamation me-1"></i>
                                 Always backup before running migrations
                              </small>
                           </div>
                        </div>
                     </div>
                  </div>

                  <!-- Data Import -->
                  <div class="col-lg-6">
                     <div class="card h-100 border-success">
                        <div class="card-header bg-success text-white">
                           <h5 class="card-title mb-0"><i class="bi bi-upload"></i> Data Import</h5>
                        </div>
                        <div class="card-body">
                           <p class="text-muted mb-3">Import data from CSV, Excel, and other formats</p>

                           <!-- Import Options -->
                           <div class="list-group list-group-flush mb-3">
                              <div class="list-group-item d-flex justify-content-between align-items-center px-0">
                                 <span><i class="bi bi-people text-success me-2"></i>Student Records</span>
                                 <span class="badge bg-light text-dark">CSV, Excel</span>
                              </div>
                              <div class="list-group-item d-flex justify-content-between align-items-center px-0">
                                 <span><i class="bi bi-person-badge text-success me-2"></i>Staff Data</span>
                                 <span class="badge bg-light text-dark">CSV, Excel</span>
                              </div>
                              <div class="list-group-item d-flex justify-content-between align-items-center px-0">
                                 <span><i class="bi bi-currency-dollar text-success me-2"></i>Fee Records</span>
                                 <span class="badge bg-light text-dark">CSV</span>
                              </div>
                           </div>

                           <div class="d-grid gap-2">
                              <button class="btn btn-outline-success btn-sm" disabled>
                                 <i class="bi bi-upload"></i> Import Data
                              </button>
                              <button class="btn btn-outline-secondary btn-sm" disabled>
                                 <i class="bi bi-file-earmark"></i> Download Templates
                              </button>
                           </div>

                           <div class="mt-3">
                              <small class="text-muted">
                                 <i class="bi bi-info-circle me-1"></i>
                                 Validate data before importing
                              </small>
                           </div>
                        </div>
                     </div>
                  </div>

                  <!-- Data Export -->
                  <div class="col-lg-6">
                     <div class="card h-100 border-info">
                        <div class="card-header bg-info text-white">
                           <h5 class="card-title mb-0"><i class="bi bi-download"></i> Data Export</h5>
                        </div>
                        <div class="card-body">
                           <p class="text-muted mb-3">Export system data for reporting and analysis</p>

                           <!-- Export Options -->
                           <div class="list-group list-group-flush mb-3">
                              <div class="list-group-item d-flex justify-content-between align-items-center px-0">
                                 <span><i class="bi bi-building text-info me-2"></i>Trust Data</span>
                                 <span class="badge bg-light text-dark">Excel, PDF</span>
                              </div>
                              <div class="list-group-item d-flex justify-content-between align-items-center px-0">
                                 <span><i class="bi bi-graph-up text-info me-2"></i>Analytics Report</span>
                                 <span class="badge bg-light text-dark">PDF, CSV</span>
                              </div>
                              <div class="list-group-item d-flex justify-content-between align-items-center px-0">
                                 <span><i class="bi bi-journal-text text-info me-2"></i>Audit Logs</span>
                                 <span class="badge bg-light text-dark">CSV</span>
                              </div>
                           </div>

                           <div class="d-grid gap-2">
                              <button class="btn btn-outline-info btn-sm" disabled>
                                 <i class="bi bi-download"></i> Export Data
                              </button>
                              <button class="btn btn-outline-secondary btn-sm" disabled>
                                 <i class="bi bi-calendar"></i> Schedule Exports
                              </button>
                           </div>

                           <div class="mt-3">
                              <small class="text-muted">
                                 <i class="bi bi-clock me-1"></i>
                                 Exports are processed in the background
                              </small>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>

               <!-- Recent Activities -->
               <div class="row mt-4">
                  <div class="col-12">
                     <div class="card">
                        <div class="card-header">
                           <h5 class="card-title mb-0"><i class="bi bi-clock-history"></i> Recent Data Operations</h5>
                        </div>
                        <div class="card-body">
                           <div class="table-responsive">
                              <table class="table table-sm table-hover">
                                 <thead>
                                    <tr>
                                       <th>Operation</th>
                                       <th>Type</th>
                                       <th>Status</th>
                                       <th>Date/Time</th>
                                       <th>Actions</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr>
                                       <td><i class="bi bi-shield-check text-success me-2"></i>System Backup</td>
                                       <td><span class="badge bg-primary">Backup</span></td>
                                       <td><span class="badge bg-success">Completed</span></td>
                                       <td>2025-08-23 12:00:00</td>
                                       <td>
                                          <button class="btn btn-sm btn-outline-secondary" disabled>
                                             <i class="bi bi-download"></i>
                                          </button>
                                       </td>
                                    </tr>
                                    <tr>
                                       <td><i class="bi bi-arrow-repeat text-warning me-2"></i>Schema Update</td>
                                       <td><span class="badge bg-warning">Migration</span></td>
                                       <td><span class="badge bg-success">Completed</span></td>
                                       <td>2025-08-22 18:30:00</td>
                                       <td>
                                          <button class="btn btn-sm btn-outline-secondary" disabled>
                                             <i class="bi bi-info-circle"></i>
                                          </button>
                                       </td>
                                    </tr>
                                    <tr>
                                       <td><i class="bi bi-download text-info me-2"></i>Trust Report Export</td>
                                       <td><span class="badge bg-info">Export</span></td>
                                       <td><span class="badge bg-success">Completed</span></td>
                                       <td>2025-08-22 10:15:00</td>
                                       <td>
                                          <button class="btn btn-sm btn-outline-secondary" disabled>
                                             <i class="bi bi-download"></i>
                                          </button>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>

                           <div class="alert alert-info mt-3 mb-0">
                              <i class="bi bi-info-circle me-2"></i>
                              <strong>Coming Soon:</strong> Advanced data management features including automated
                              workflows, data validation, and comprehensive audit trails will be available in the next
                              major release.
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </main>
         </div>
      </div>

      <!-- Bootstrap JS -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

      <script>
         function createBackup() {
            alert('Manual backup creation will be available soon!');
         }
      </script>
   </body>
</html>
